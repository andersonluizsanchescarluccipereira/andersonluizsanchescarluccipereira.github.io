<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jogo dos Emojis</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body { margin:0; padding:0; font-family:Arial,sans-serif; background:#fdf6e3; width:100%; height:100%; display:flex; justify-content:center; align-items:center; }
.container { width:95%; max-width:1024px; min-width:320px; max-height:95vh; background:#fff8e1; border-radius:20px; padding:2%; box-shadow:0 0 15px rgba(0,0,0,0.2); display:flex; flex-direction:column; align-items:center; overflow:hidden; }
h1 { font-size:6vw; margin:1vh 0; color:#333; }
p { font-size:4vw; margin:1vh 0; }
.screen { display:none; width:100%; height:100%; flex-direction:column; align-items:center; justify-content:center; }
#emoji { font-size:15vw; margin:1vh 0; max-height:40vh; }
input { font-size:5vw; padding:2vh; width:80%; max-width:400px; border-radius:12px; border:2px solid #ccc; margin-bottom:1vh; }
button { font-size:5vw; padding:2vh 5vw; margin:1vh; cursor:pointer; border-radius:12px; border:none; background-color:#4CAF50; color:white; transition:0.2s; max-width:90%; }
button:hover { background-color:#45a049; }
#back-btn { background-color:#FF6F61; }
#back-btn:hover { background-color:#ff3b2f; }
#feedback { font-size:10vw; margin:2vh 0; max-height:20vh; overflow:hidden; text-align:center; }
#timer, #score { font-size:5vw; margin:1vh 0; }
#hint { font-size:4vw; margin-bottom:2vh; text-align:center; }
#progress-container { width:80%; height:20px; background-color:#ddd; border-radius:10px; overflow:hidden; margin:1vh 0; display:none; }
#progress-bar { width:100%; height:100%; background-color:#4CAF50; transition: width 0.1s linear, background-color 0.1s linear; }

@media (min-width: 768px){
  h1 { font-size:3em; }
  p, #hint { font-size:1.5em; }
  button { font-size:1.2em; padding:0.8em 1.5em; }
  input { font-size:1em; padding:0.5em; }
  #timer, #score { font-size:1.2em; }
  #feedback { font-size:3em; }
  #emoji { font-size:6em; margin:1em 0; }
  #progress-container { height:25px; }
}
</style>
</head>
<body>
<div class="container">

  <div id="menu" class="screen">
    <h1>ü•ó Jogo dos Emojis</h1>
    <p>Escolha o modo de jogo:</p>
    <button onclick="startGame('easy')">Modo F√°cil</button>
    <button onclick="startGame('hard')">Modo Dif√≠cil</button>
    <button onclick="startGame('very-hard')">Modo Muito Dif√≠cil</button>
  </div>

  <div id="game-area" class="screen">
    <div id="timer">‚è±Ô∏è Tempo: 0s</div>
    <div id="score">‚≠ê Pontos: 0</div>
    <div id="emoji"></div>
    <p id="hint"></p>
    <input type="text" id="answer" placeholder="...">
    <button onclick="checkAnswer()">Responder</button>
    <button id="back-btn" onclick="goBack()">‚¨ÖÔ∏è Voltar ao Menu</button>
    <div id="feedback"></div>
    <div id="progress-container">
      <div id="progress-bar"></div>
    </div>
  </div>

  <div id="game-over" class="screen">
    <h1>üèÜ Fim de Jogo!</h1>
    <h2 id="final-score"></h2>
    <h3 id="final-time"></h3>
    <button onclick="restartGame()">üîÑ Jogar Novamente</button>
    <button onclick="goBack()">‚¨ÖÔ∏è Voltar ao Menu</button>
  </div>

</div>

<audio id="applause-sound" src="https://www.fesliyanstudios.com/play-mp3/387" preload="auto"></audio>
<audio id="fail-sound" src="https://www.fesliyanstudios.com/play-mp3/6678" preload="auto"></audio>

<script>
const emojisMaster = [
  {emoji:"ü•ë", nome:"abacate"}, {emoji:"üçç", nome:"abacaxi"}, {emoji:"üçè", nome:"ma√ß√£ verde"},
  {emoji:"üçé", nome:"ma√ß√£ vermelha"}, {emoji:"ü´í", nome:"azeitona"}, {emoji:"üçå", nome:"banana"},
  {emoji:"üçë", nome:"p√™ssego"}, {emoji:"ü•¶", nome:"br√≥colis"}, {emoji:"ü•ï", nome:"cenoura"},
  {emoji:"ü••", nome:"coco"}, {emoji:"ü•í", nome:"pepino"}, {emoji:"üçí", nome:"cereja"},
  {emoji:"üåΩ", nome:"milho"}, {emoji:"ü´õ", nome:"ervilha"}, {emoji:"üçì", nome:"morango"},
  {emoji:"üßÑ", nome:"alho"}, {emoji:"üçã", nome:"lim√£o"}, {emoji:"üçà", nome:"mel√£o"},
  {emoji:"üçâ", nome:"melancia"}, {emoji:"ü•≠", nome:"manga"}, {emoji:"üçä", nome:"tangerina"},
  {emoji:"üçÑ", nome:"cogumelo"}, {emoji:"üçê", nome:"pera"}, {emoji:"ü´ê", nome:"mirtilo"},
  {emoji:"üßÖ", nome:"cebola"}, {emoji:"ü•î", nome:"batata"}, {emoji:"üç†", nome:"batata doce"},
  {emoji:"üå∂Ô∏è", nome:"pimenta"}, {emoji:"ü•¨", nome:"alface"}, {emoji:"üçÜ", nome:"berinjela"},
  {emoji:"ü•ù", nome:"kiwi"}, {emoji:"üçá", nome:"uva"}, {emoji:"üçÖ", nome:"tomate"}
];

let emojis = [];
let mode="easy", current=0, points=0, startTime, timerInterval, remainingTime=0;
let lastTime = null;

const applauseSound = document.getElementById("applause-sound");
const failSound = document.getElementById("fail-sound");
const progressContainer = document.getElementById("progress-container");
const progressBar = document.getElementById("progress-bar");

function showScreen(id){ document.querySelectorAll(".screen").forEach(s=>s.style.display="none"); document.getElementById(id).style.display="flex"; }
function normalize(str){ return str.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(); }
function shuffleArray(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }

// Dentro do startGame()
function startGame(selectedMode){
  mode = selectedMode; current = 0; points = 0;
  document.getElementById("score").innerText = "‚≠ê Pontos: 0";
  document.getElementById("feedback").innerText = "";

  // Embaralha perguntas nos modos hard e very-hard
  if(mode === "hard" || mode === "very-hard"){
    emojis = shuffleArray([...emojisMaster]);
  } else {
    emojis = [...emojisMaster];
  }

  showScreen("game-area");

  if(mode === "very-hard"){
    remainingTime = 30;
    progressContainer.style.display = "block";
    updateProgressBar();
    startTimer();
  } else {
    progressContainer.style.display = "none";
    startTime = Date.now();
    clearInterval(timerInterval);
    timerInterval = setInterval(updateTimerNormal, 1000);
  }

  showEmoji();
}

function startTimer(){ lastTime = performance.now(); requestAnimationFrame(updateTimerFrame); }

function updateTimerFrame(timestamp){
  const delta = (timestamp - lastTime)/1000; lastTime = timestamp;
  if(mode==="very-hard"){
    remainingTime -= delta;
    if(remainingTime <= 0){ remainingTime=0; failSound.play(); alert("‚è∞ Tempo esgotado! Voltando ao menu principal."); showScreen("menu"); return; }
    document.getElementById("timer").innerText = "‚è±Ô∏è Tempo: "+Math.ceil(remainingTime)+"s";
    updateProgressBar();
    requestAnimationFrame(updateTimerFrame);
  }
}

function updateTimerNormal(){
  let elapsed=Math.floor((Date.now()-startTime)/1000);
  document.getElementById("timer").innerText="‚è±Ô∏è Tempo: "+elapsed+"s";
}

function updateProgressBar(){
  progressBar.style.width=(remainingTime/30*100)+"%";
  progressBar.style.backgroundColor=(remainingTime>15)?"#4CAF50":(remainingTime>10?"#FFD700":"#FF3B30");
}

function showEmoji(){
  if(current>=emojis.length){ endGame(); return; }
  const item=emojis[current];
  document.getElementById("emoji").innerText=item.emoji;
  let hint=item.nome.length>6?item.nome.slice(0,3):item.nome.slice(0,2);
  document.getElementById("hint").innerText="Complete o nome inteiro do emoji: "+hint+"...";
  document.getElementById("answer").value="";
  document.getElementById("answer").focus();
}

function checkAnswer(){
  const answer=normalize(document.getElementById("answer").value.trim());
  const correct=normalize(emojis[current].nome);
  if(answer===correct){ points += (mode==="very-hard")?3:1; current++; document.getElementById("score").innerText="‚≠ê Pontos: "+points; document.getElementById("feedback").innerText="üòÉ"; if(current>=emojis.length){ applauseSound.play(); endGame(); } else { if(mode==="very-hard") remainingTime=30; showEmoji(); } }
  else{ document.getElementById("feedback").innerText="üò¢"; failSound.play(); if(mode==="hard" || mode==="very-hard"){ current=0; points=0; document.getElementById("score").innerText="‚≠ê Pontos: 0"; if(mode==="very-hard") remainingTime=20; showEmoji(); } }
}

function endGame(){ clearInterval(timerInterval); let totalTime=Math.floor((Date.now()-startTime)/1000); document.getElementById("final-score").innerText="‚≠ê Pontua√ß√£o final: "+points; document.getElementById("final-time").innerText="‚è±Ô∏è Tempo total: "+totalTime+"s"; showScreen("game-over"); }
function goBack(){ clearInterval(timerInterval); showScreen("menu"); }
function restartGame(){ startGame(mode); }

showScreen("menu");
</script>
</body>
</html>
